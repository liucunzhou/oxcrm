<{if !empty($banquet)}>
<div class="layui-card">
    <div class="layui-card-header">
        <div class="layui-card-header-left">
            婚宴基本信息
        </div>

        <div class="layui-card-header-right">
            <a title="编辑婚宴基本信息"
               class="layui-right-side btn-edit"
               href="javascript:void(0);"
               data-action="{:url('/index/order.banquet/edit', ['id'=>$data['id']])}">编辑</a>

            <a title="删除婚宴基本信息"
               class="lay-delete-api"
               href="javascript:void(0);"
               data-fresh="yes"
               data-action="{:url('/index/order.banquet/delete', ['id'=>$data['id']])}">删除</a>
        </div>
    </div>
    <div class="layui-card-body no-padding no-margin">
        <table class="layui-table no-padding no-margin">
            <colgroup>
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col width="120">
                <col>
            </colgroup>
            <thead>
                <tr>
                    <th class="text-center">婚宴总金额</th>
                    <th class="text-center">桌数</th>
                    <th class="text-center">餐标</th>
                    <th class="text-center">酒水费用</th>
                    <th class="text-center">加菜换菜</th>
                    <th class="text-center">优惠金额</th>
                    <th class="text-center">服务费总计</th>
                    <th class="text-center">仪式堂</th>
                    <th class="text-center">仪式堂价格</th>
                    <th class="text-center">其他金额</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="text-center">{$banquet.banquet_totals}</td>
                    <td class="text-center">{$banquet.table_amount}</td>
                    <td class="text-center">{$banquet.table_price}</td>
                    <td class="text-center">{$banquet.wine_fee}</td>
                    <td class="text-center">{$banquet.banquet_update_table}</td>
                    <td class="text-center">{$banquet.banquet_discount}</td>
                    <td class="text-center">{$banquet.service_fee}</td>
                    <td class="text-center">{$rituals[$banquet.banquet_ritual_id]['title']}</td>
                    <td class="text-center">{$banquet.banquet_ritual_hall|default="-"}</td>
                    <td class="text-center">{$banquet.banquet_other}</td>
                </tr>
                <tr>
                    <td class="text-center">备注:</td>
                    <td colspan="9">
                        {$banquet.banquet_remark}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="layui-card-footer text-right">
        <a title="添加婚宴二销信息"
           class="layui-right-side btn-edit-solid"
           href="javascript:void(0);"
           data-action="{:url('order.banquet_suborder/create', ['order_id'=> $data['id']])}">添加婚宴二销信息</a>

        <a title="添加婚宴收款信息"
           class="layui-right-side btn-edit-solid"
           href="javascript:void(0);"
           data-action="{:url('order.banquet_receivable/create', ['order_id'=>$data['id']])}">添加婚宴收款信息</a>

        <a title="添加婚宴付款信息"
           class="layui-right-side btn-edit-solid"
           href="javascript:void(0);"
           data-action="{:url('order.banquet_payment/create', ['order_id'=>$data['id']])}">添加婚宴付款信息</a>

        <a title="添加酒店协议"
           class="layui-right-side btn-edit-solid"
           href="javascript:void(0);"
           data-action="{:url('order.hotel_protocol/create', ['id'=>$data['id']])}">添加酒店协议</a>
    </div>
</div>
<{/if}>

<{if !empty($hotelItem)}>
<div class="layui-card">
    <div class="layui-card-body no-margin no-padding">
        <table class="layui-table no-padding no-margin">
            <thead>
            <tr class="no-border">
                <td colspan="9">酒店服务项目</td>
                <td class="text-right">
                    <a title="编辑酒店服务项目"
                       class="layui-right-side btn-edit"
                       href="javascript:void(0);"
                       data-action="{:url('order.hotel_item/edit', ['id'=>$data['id']])}">编辑</a>
                </td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="tb-field">婚房</td>
                <td class="tb-value">{$hotelItem.wedding_room}</td>
                <td class="tb-field">停车位</td>
                <td class="tb-value">{$hotelItem.part}</td>
                <td class="tb-field">香槟</td>
                <td class="tb-value">{$hotelItem.champagne}</td>
                <td class="tb-field">茶歇</td>
                <td class="tb-value">{$hotelItem.tea}</td>
                <td class="tb-field">蛋糕</td>
                <td class="tb-value">{$hotelItem.cake}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<{/if}>

<!--婚宴二销信息-->
<{if !$banquetOrders->isEmpty()}>
    <div class="layui-card layui-card">
        <div class="layui-card-body no-padding no-margin">
            <table class="layui-table no-padding no-margin">
                <colgroup>
                    <col width="150">
                    <col width="150">
                    <col width="150">
                    <col width="150">
                    <col width="150">
                    <col>
                    <col width="150">
                </colgroup>
                <thead>
                    <tr class="no-border">
                        <td colspan="7">婚宴二销信息</td>
                    </tr>
                    <tr>
                        <th class="text-center">订单号</th>
                        <th class="text-center">桌数</th>
                        <th class="text-center">餐标</th>
                        <th class="text-center">订单金额</th>
                        <th class="text-center">审核状态</th>
                        <th class="text-left">备注</th>
                        <th class="text-right"></th>
                    </tr>
                </thead>
                <tbody>
                    <{foreach name="banquetOrders" item="row"}>
                    <tr>
                        <td class="text-center">{$row.banquet_order_no}</td>
                        <td class="text-center">{$row.table_amount}</td>
                        <td class="text-center">{$row.table_price}</td>
                        <td class="text-center">{$row.banquet_totals}</td>
                        <td class="text-center">{$confirmStatusList[$row['check_banquet_suborder_status']]}</td>
                        <td class="text-left">{$row.sub_banquet_remark}</td>
                        <td class="text-right">
                            <div>
                                <a href="javascript:void(0);" class="btn-edit-solid layui-right-side" title="编辑婚宴二销信息" data-action="{:url('/index/order.banquet_suborder/edit', ['id'=>$row['id']])}">编辑</a>
                                <a href="javascript:void(0);" class="{:auth('/index/order.banquet_suborder/confirm')} btn-confirm-solid layui-right-side" title="审核婚宴二销信息" data-action="{:url('order.banquet_suborder/confirm', ['id'=>$row['id']])}">审核</a>
                                <a href="javascript:void(0);" class="btn-delete-solid lay-delete-api" data-action="{:url('/index/order.banquet_suborder/delete', ['id'=>$row['id']])}">删除</a>
                            </div>
                        </td>
                    </tr>
                    <{/foreach}>
                </tbody>
            </table>
        </div>
    </div>
<{/if}>

<{if !$banquetReceivables->isEmpty()}>
<div class="layui-card">
    <div class="layui-card-body no-padding no-margin">
        <table class="layui-table no-padding no-margin">
            <colgroup>
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col>
                <col width="240">
            </colgroup>

            <thead>
            <tr class="no-border">
                <td colspan="7">婚宴收款信息</td>
            </tr>
            <tr>
                <th class="text-center">收款编号</th>
                <th class="text-center">收款日期</th>
                <th class="text-center">实际收款日期</th>
                <th class="text-center">收款方式</th>
                <th class="text-center">款项性质</th>
                <th class="text-center">收款金额</th>
                <th class="text-center">审核状态</th>
                <th class="text-left">备注</th>
                <th class="text-left"></th>
            </tr>
            </thead>
            <tbody>
            <{foreach name="banquetReceivables" item="row"}>
            <tr>
                <td class="text-center">{$row['banquet_receivable_no']}</td>
                <td class="text-center">{$row['banquet_income_date']}</td>
                <td class="text-center">{$row['banquet_income_real_date']}</td>
                <td class="text-center">{$payments[$row['banquet_income_payment']]}</td>
                <td class="text-center">{$paymentTypes[$row['banquet_income_type']]}</td>
                <td class="text-center">{$row['banquet_income_item_price']}</td>
                <td class="text-center">{$confirmStatusList[$row['check_banquet_receivable_status']]}</td>
                <td class="text-left">{$row.remark}</td>
                <td class="text-right">
                    <div>
                        <a href="javascript:void(0);" class="btn-edit-solid layui-right-side" data-action="{:url('/index/order.banquet_receivable/edit', ['id'=>$row['id']])}">编辑</a>
                        <a href="javascript:void(0);" class="{:auth('/index/order.banquet_receivable/confirm')} btn-confirm-solid layui-right-side" data-action="{:url('/index/order.banquet_receivable/confirm', ['id'=>$row['id']])}">审核</a>
                        <a href="javascript:void(0);" class="btn-delete-solid lay-delete-api" data-action="{:url('/index/order.banquet_receivable/delete', ['id'=>$row['id']])}">删除</a>
                    </div>
                </td>
            </tr>
            <{/foreach}>
            </tbody>
        </table>
    </div>
</div>
<{/if}>

<!--婚宴付款单-->
<{if !$banquetPayments->isEmpty()}>
<div class="layui-card">
    <div class="layui-card-body no-margin no-padding">
        <table class="layui-table no-padding no-margin">
            <colgroup>
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col>
                <col width="240">
            </colgroup>
            <thead>
                <tr class="no-border">
                    <td colspan="8">婚宴付款信息</td>
                </tr>
                <tr>
                    <th class="text-center">付款编号</th>
                    <th class="text-center">申请日期</th>
                    <th class="text-center">款项性质</th>
                    <th class="text-center">付款金额</th>
                    <th class="text-center">收款名称</th>
                    <th class="text-center">审核状态</th>
                    <th class="text-left">备注</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            <{foreach name="banquetPayments" item="row"}>
            <tr>
                <th class="text-center">{$row['banquet_payment_no']}</th>
                <th class="text-center">{$row['banquet_apply_pay_date']}</th>
                <th class="text-center">{$paymentTypes[$row['banquet_pay_type']]}</th>
                <th class="text-center">{$row['banquet_pay_item_price']}</th>
                <th class="text-center">{$row['banquet_supplier']}</th>
                <th class="text-center">
                    {$confirmStatusList[$row['check_status_payment_account']]}
                    -
                    {$confirmStatusList[$row['check_status_payment_fiance']]}
                    -
                    {$confirmStatusList[$row['check_status_payment_cashier']]}
                </th>
                <th class="text-left">{$row.banquet_payment_remark}</th>
                <th class="text-right">
                    <div>
                        <a href="javascript:void(0);"
                           class="btn-edit-solid layui-right-side"
                           data-action="{:url('/index/order.banquet_payment/edit', ['id'=>$row['id']])}">编辑</a>
                        <a href="javascript:void(0);"
                           class="btn-delete-solid lay-delete-api"
                           data-action="{:url('/index/order.banquet_payment/delete', ['id'=>$row['id']])}">删除</a>
                        <a href="javascript:void(0);"
                           class="{:auth('/index/order.banquet_payment/accountConfirm')} btn-confirm-solid layui-right-side"
                           title="一站式婚宴付款-会计审核"
                           data-action="{:url('/index/order.banquet_payment/accountConfirm', ['id'=>$row['id']])}">会计审核</a>
                        <a href="javascript:void(0);"
                           class="{:auth('/index/order.banquet_payment/fianceConfirm')} btn-confirm-solid layui-right-side"
                           title="一站式婚宴付款-财务审核"
                           data-action="{:url('/index/order.banquet_payment/fianceConfirm', ['id'=>$row['id']])}">财务审核</a>
                        <a href="javascript:void(0);"
                           class="{:auth('/index/order.banquet_payment/cashierConfirm')} btn-confirm-solid layui-right-side"
                           title="一站式婚宴付款-出纳审核"
                           data-action="{:url('/index/order.banquet_payment/cashierConfirm', ['id'=>$row['id']])}">出纳审核</a>
                    </div>
                </th>
            </tr>
            <{/foreach}>
            </tbody>
        </table>
    </div>
</div>
<{/if}>


<!--婚宴酒店协议信息-->
<{if !$hotelProtocol->isEmpty()}>
<div class="layui-card layui-card">
    <div class="layui-card-body no-padding no-margin">
        <table class="layui-table no-padding no-margin">
            <colgroup>
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col width="150">
                <col>
                <col width="150">
            </colgroup>
            <thead>
            <tr class="no-border">
                <td colspan="7">酒店协议信息</td>
            </tr>
            <tr>
                <th class="text-center">餐标</th>
                <th class="text-center">桌数</th>
                <th class="text-center">定金付款金额</th>
                <th class="text-center">定金付款日期</th>
                <th class="text-center">中款付款金额</th>
                <th class="text-center">中款付款日期</th>
                <th class="text-center">尾款付款金额</th>
                <th class="text-center">尾款付款日期</th>
                <th class="text-right"></th>
            </tr>
            </thead>
            <tbody>
            <{foreach name="hotelProtocol" item="row"}>
            <tr>
                <td class="text-center">{$row.table_price}</td>
                <td class="text-center">{$row.table_amount}</td>
                <td class="text-center">{$row.earnest_money}</td>
                <td class="text-center">{$row.earnest_money_date}</td>
                <td class="text-center">{$row.middle_money}</td>
                <td class="text-center">{$row.middle_money_date}</td>
                <td class="text-center">{$row.tail_money}</td>
                <td class="text-center">{$row.tail_money_date}</td>
                <td class="text-right">
                    <div>
                        <a href="javascript:void(0);" class="btn-edit-solid layui-right-side" title="编辑酒店协议信息" data-action="{:url('/index/order.hotel_protocol/edit', ['id'=>$row['id']])}">编辑</a>
                        <a href="javascript:void(0);" class="btn-delete-solid lay-delete-api" data-action="{:url('/index/order.hotel_protocol/delete', ['id'=>$row['id']])}">删除</a>
                    </div>
                </td>
            </tr>
            <{/foreach}>
            </tbody>
        </table>
    </div>
</div>
<{/if}>
